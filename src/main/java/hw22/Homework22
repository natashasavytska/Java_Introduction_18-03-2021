create table if not exists students
(
    student_id  int auto_increment unique not null primary key,
    firstName   varchar(50)               not null,
    lastName    varchar(50)               not null,
    group_id    int,
    yearOfEntry smallint
);

create table if not exists `groups`
(
    group_id   int auto_increment not null unique primary key,
    group_name varchar(25)        not null
);

alter table students
    add column group_id int not null;
alter table students
    add foreign key (group_id) references `groups` (group_id);


create table if not exists marks
(
    mark_id int auto_increment not null unique primary key,
    lesson  int                not null,
    student int                not null,
    mark    tinyint
);
create table if not exists lessons
(
    lesson_id int auto_increment not null unique primary key,
    topic     varchar(50)        not null,
    teacher   int                not null,
    semester  tinyint,
    year      smallint
);
create table if not exists teachers
(
    teacher_id int auto_increment not null unique primary key,
    firstName  varchar(25)        not null,
    lastName   varchar(25)        not null,
    chair      int                not null
);
create table if not exists chairs
(
    chair_id  int auto_increment not null unique primary key,
    chairName varchar(25)        not null,
    manager   int
);
alter table chairs
    add foreign key (manager) references teachers (teacher_id);

alter table teachers
    add foreign key (chair) references chairs (chair_id);

alter table lessons
    add foreign key (teacher) references teachers (teacher_id);

alter table marks
    add foreign key (lesson) references lessons (lesson_id);

alter table marks
add foreign key (student) references students(student_id);